<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Receiver</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<style>
html,body{margin:0;padding:0;height:100%;width:100%;background:#fff;font-family:sans-serif;cursor:pointer;display:flex;justify-content:center;align-items:center;text-align:center;}
#overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;display:flex;justify-content:center;align-items:center;z-index:10;}
#overlay h1{font-size:24px;color:#333;}
#status{font-size:16px;margin-top:10px;}
img{max-width:320px;margin-top:20px;}
iframe{border:none;}
</style>
</head>
<body>

<div id="overlay"><h1>Click anywhere to enable</h1></div>
<div>
<p id="status">System Running...</p>
<img id="img">
<audio id="audio" controls style="display:none;"></audio>
<div id="ytContainer"></div>
</div>

<script>
const firebaseConfig = {
  apiKey:"AIzaSyCmbHFACq1ZGfXnAnWqXmLeKsTWVkrsTIg",
  authDomain:"notify-f0a18.firebaseapp.com",
  databaseURL:"https://notify-f0a18-default-rtdb.firebaseio.com",
  projectId:"notify-f0a18"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();

let enabled=false;
document.getElementById("overlay").addEventListener("click",()=>{
  Notification.requestPermission();
  enabled=true;
  document.getElementById("overlay").style.display="none";
});

db.ref("signal").on("value",snap=>{
  const d=snap.val();
  if(!d) return;
  
  // Text
  if(d.type==="text"){
    document.getElementById("status").innerText=d.message;
    if(enabled && Notification.permission==="granted")
      new Notification("System",{body:d.message});
  }
  
  // Image
  if(d.type==="image"){
    const imgEl=document.getElementById("img");
    imgEl.src=d.data;
    imgEl.style.display="block";
  }
  
  // Audio
  if(d.type==="audio" && enabled){
    const audioEl=document.getElementById("audio");
    audioEl.src=d.data;
    audioEl.play().catch(()=>{});
  }
  
  // YouTube
  if(d.type==="youtube"){
    const c=document.getElementById("ytContainer");
    c.innerHTML="";
    let url=d.url;
    let embed=`https://www.youtube.com/embed/${url.split("v=")[1].split("&")[0]}?autoplay=1`;
    if(d.mode==="hidden"){
      const ifr=document.createElement("iframe");
      ifr.src=embed;
      ifr.width=1; ifr.height=1; ifr.style.position="absolute"; ifr.style.left="-1000px";
      c.appendChild(ifr);
    } else {
      const ifr=document.createElement("iframe");
      ifr.src=embed;
      ifr.width=window.innerWidth;
      ifr.height=window.innerHeight;
      c.appendChild(ifr);
    }
  }
});
</script>

</body>
</html>
